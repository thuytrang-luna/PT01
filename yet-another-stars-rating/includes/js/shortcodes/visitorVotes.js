(()=>{"use strict";function t(t){return null!=t&&""!==t||(t=!0),"true"!==t&&"1"!==t||(t=!0),"false"!==t&&"0"!==t||(t=!1),t}const{__:e}=wp.i18n;function a(e,a,s,r,n,o,i,l,d,u,y,v){a=parseFloat(a),r=t(r);const c=document.getElementById(n);null!==y&&(y.innerHTML=""),function(t,e,a=!1,s=.1,r=!0,n=!1,o=!1){let i;i=a||document.getElementById(e),t=parseInt(t),raterJs({starSize:t,showToolTip:!1,element:i,step:s,readOnly:r,rating:n,rateCallback:o})}(e,n,c,1,r,a,(function(t,e){null!==y&&(y.innerHTML=yasrCommonData.loaderHtml);var a={action:"yasr_send_visitor_rating",rating:t,post_id:s,nonce_visitor:i,is_singular:l};this.setRating(t),this.disable(),jQuery.post(yasrCommonData.ajaxurl,a,(function(t){let e,a,s;"success"===(t=JSON.parse(t)).status?(e=t.number_of_votes,a=t.average_rating,s=t.rating_saved_text,null!==d&&(d.innerHTML=e),null!==u&&(u.innerHTML=a)):s=t.text,null!==v&&(v.innerHTML=s,v.style.display=""),null!==y&&(y.innerHTML="")})),e()}))}function s(t){const a=t.medium_rating;delete t.medium_rating;let s=0;for(let e=1;e<=5;e++)(1===e||t[e].n_of_votes>s)&&(s=t[e].n_of_votes);let r=Math.log(s)*Math.LOG10E+1|0,n="5%";r<=3&&(n="5%"),r>3&&r<=5&&(n="10%"),r>5&&(n="15%");let o='<div class="yasr-visitors-stats-tooltip">';o+='<span id="yasr-medium-rating-tooltip">'+a+" "+e("out of 5 stars","yet-another-stars-rating")+"</span>",o+='<div class="yasr-progress-bars-container">';let i=e("stars","yet-another-stars-rating"),l=0,d=0;for(let a=5;a>0;a--)1===a&&(i=e("star","yet-another-stars-rating")),void 0!==t[a]&&(l=t[a].progressbar,d=t[a].n_of_votes),o+=`<div class='yasr-progress-bar-row-container yasr-w3-container'>\n                               <div class='yasr-progress-bar-name'>${a} ${i}</div> \n                               <div class='yasr-single-progress-bar-container'> \n                                   <div class='yasr-w3-border'> \n                                       <div class='yasr-w3-amber' style='height:17px;width:${l}'></div> \n                                   </div>\n                               </div> \n                               <div class='yasr-progress-bar-votes-count' style="flex-basis:${n} ">${d}</div>\n                           </div>`;return o+="</div></div>",o}!function(r){if(r.length>0&&(function(s){for(let r=0;r<s.length;r++)!function(r){if(!1!==s.item(r).classList.contains("yasr-star-rating"))return;const n=s.item(r);let o=n.getAttribute("data-rating"),i=n.getAttribute("data-readonly-attribute"),l=n.getAttribute("data-rater-readonly");null===i&&(i=!1),i=t(i),l=t(l),!0===i&&(l=!0);let d=n.getAttribute("data-rater-postid"),u=n.id,y=u.replace("yasr-visitor-votes-rater-",""),v=parseInt(n.getAttribute("data-rater-starsize")),c=n.getAttribute("data-rater-nonce"),m=n.getAttribute("data-issingular"),g="yasr-vv-votes-number-container-"+y,_="yasr-vv-average-container-"+y,p="yasr-vv-bottom-container-"+y,f="yasr-vv-loader-"+y;const b=document.getElementById(g),h=document.getElementById(_),w=document.getElementById(p),H=document.getElementById(f);if("yes"===yasrCommonData.ajaxEnabled){null!==H&&(H.innerHTML=yasrCommonData.loaderHtml);let t={action:"yasr_load_vv",post_id:d};jQuery.get(yasrCommonData.ajaxurl,t).done((function(t){let e,s=JSON.parse(t);e=!0===i||s.yasr_visitor_votes.stars_attributes.read_only,o=s.yasr_visitor_votes.number_of_votes>0?s.yasr_visitor_votes.sum_votes/s.yasr_visitor_votes.number_of_votes:0,o=o.toFixed(1),o=parseFloat(o),a(v,o,d,e,u,0,c,m,b,h,H,w),!0!==i&&(null!==b&&(b.innerHTML=s.yasr_visitor_votes.number_of_votes),null!==h&&(h.innerHTML=o),!1!==s.yasr_visitor_votes.stars_attributes.span_bottom&&null!==w&&(w.innerHTML=s.yasr_visitor_votes.stars_attributes.span_bottom,w.style.display=""))})).fail((function(t,s,r,n){console.info(e("YASR ajax call failed. Showing ratings from html","yet-another-stars-rating")),a(v,o,d,l,u,0,c,m,b,h,H,w),!0!==i&&(w.style.display="")}))}else a(v,o,d,l,u,0,c,m,b,h,H,w)}(r)}(r),"yes"===yasrCommonData.visitorStatsEnabled)){let t=document.getElementsByClassName("yasr-dashicons-visitor-stats");t&&function(t){let e,a,r=!1;for(let n=0;n<t.length;n++)!function(n){let o="#"+t.item(n).id,i=t.item(n).getAttribute("data-postid");0===n&&(e=document.getElementsByClassName("yasr-vv-text-container"),null!==e&&(a=window.getComputedStyle(e[0],null).getPropertyValue("color"))),a&&(document.getElementById(t.item(n).id).style.fill=a);let l={action:"yasr_stats_visitors_votes",post_id:i};tippy(o,{allowHTML:!0,content:'<span style="color: #0a0a0a">Loading...</span>',theme:"yasr",arrow:!0,arrowType:"round",onShow:function(t){o!==r&&jQuery.post(yasrCommonData.ajaxurl,l,(function(e){e=JSON.parse(e),t.setContent(s(e))}))},onHidden:function(){r=o}})}(n)}(t)}}(document.getElementsByClassName("yasr-rater-stars-vv"))})();